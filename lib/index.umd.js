var __vite_style__=document.createElement("style");__vite_style__.innerHTML=`.row-wrap[data-v-77177a0b]{display:grid;width:100%;grid-template-columns:var(--6e9ba6ca);grid-template-rows:var(--5df8a20c);grid-auto-columns:calc(var(--506feec4) * 1px);grid-auto-rows:calc(var(--b882202e) * 1px);column-gap:calc(var(--09d70030) * 1px);row-gap:calc(var(--448b7754) * 1px);overflow:hidden;position:relative}.col-item[data-v-68feafe0]{box-sizing:border-box;border:1px solid #999;background-color:#fff;overflow:hidden;font-size:28px;font-weight:900;color:#666;text-align:center;grid-column:var(--592ccc26);grid-row:var(--0e72f30a);order:var(--20a58414);resize:none!important;position:relative}.col-item.on-drag[data-v-68feafe0]{opacity:.2}.col-item.can-edit[data-v-68feafe0]{resize:both!important}.col-item.can-drag[data-v-68feafe0]{cursor:move}
(function(e,x){typeof exports=="object"&&typeof module!="undefined"?module.exports=x(require("vue")):typeof define=="function"&&define.amd?define(["vue"],x):(e=typeof globalThis!="undefined"?globalThis:e||self,e.JdRow=x(e.Vue))})(this,function(e){"use strict";`;document.head.appendChild(__vite_style__);var x="",B=(o,r)=>{const n=o.__vccOpts||o;for(const[m,g]of r)n[m]=g;return n},M=B({__name:"row",props:{rowWidth:Number,rowHeight:Number,rowSize:{type:Number,default:24},rowGap:{type:Number,default:0},columnGap:{type:Number,default:0},columns:Array,rows:Array},setup(o){const r=o;e.useCssVars(t=>({"6e9ba6ca":e.unref(s),"5df8a20c":e.unref(j),"506feec4":o.rowWidth,b882202e:o.rowHeight,"09d70030":o.columnGap,"448b7754":o.rowGap}));const n=e.ref(null),m=e.reactive([]),g=e.reactive([]),I=e.ref(0),S=e.ref(0),_=e.ref(0),l=e.ref(0),s=e.computed(()=>{let t=Array.from({length:r.rowSize});return typeof r.rowWidth=="number"?t.fill(r.rowWidth+"px"):t.fill("1fr"),Array.isArray(r.columns)&&Object.assign(t,r.columns),t.join(" ")}),j=e.computed(()=>Array.isArray(r.rows)?r.rows.join(" "):""),d=e.reactive([]),R=()=>{const{width:t,height:a,left:p,top:f}=n.value.getBoundingClientRect(),{"padding-left":w,"padding-right":T,"border-left-width":b,"border-right-width":v,"padding-top":h,"padding-bottom":y,"border-top-width":O,"border-bottom-width":z,"grid-template-columns":N,"grid-template-rows":C}=window.getComputedStyle(n.value);I.value=t-parseInt(w)-parseInt(T)-parseInt(b)-parseInt(v),S.value=a-parseInt(h)-parseInt(y)-parseInt(O)-parseInt(z),_.value=p+parseInt(w)+parseInt(b),l.value=f+parseInt(h)+parseInt(O),Object.assign(m,N.split(" ").map(i=>parseFloat(i))),Object.assign(g,C.split(" ").map(i=>parseFloat(i)))},c=new ResizeObserver(()=>{window.requestAnimationFrame(R)}),L=(t,a,p)=>{const f=d.find(w=>w.el===t);f&&(f.gridColumn=a,f.gridRow=p)},A=new ResizeObserver(t=>{window.requestAnimationFrame(()=>{t.forEach(({target:a})=>{let{left:p,top:f,right:w,bottom:T}=a.getBoundingClientRect(),b=p-_.value,v=f-l.value,h=w-_.value,y=T-l.value,O=0,z=0,N=0,C=0;m.reduce((i,u)=>(b-=i,h-=i,O+=Math.round(b/u)<=0,z+=Math.ceil(h/u)<=0,b-=r.columnGap,h-=r.columnGap,u),0),g.reduce((i,u)=>(v-=i,y-=i,N+=Math.round(v/u)<=0,C+=Math.ceil(y/u)<=0,v-=r.rowGap,y-=r.rowGap,u),0),L(a,O-z,N-C)})})});let G;const k=new MutationObserver(t=>{clearTimeout(G),G=setTimeout(()=>{t.forEach(({target:a})=>{a.style.width="",a.style.height=""})},300)}),W=(t,a)=>{d[a]=t,t.resize&&(A.observe(t.el,{box:"border-box"}),k.observe(t.el,{attributeFilter:["style"]}))},q=t=>d.indexOf(t);let D,E;const V=()=>{const t=d.indexOf(D),a=d.indexOf(E);if(t>-1&&a>-1){const p=d.splice(t,1)[0];d.splice(a,0,p)}},J=t=>{D=t},U=t=>{E=t};return e.provide("register",W),e.provide("getOrder",q),e.provide("setOrder",V),e.provide("setDragNode",J),e.provide("setDropNode",U),e.onMounted(()=>{e.nextTick(()=>{R(),c.observe(n.value)})}),e.onUnmounted(()=>{A.disconnect(),k.disconnect(),c.disconnect()}),(t,a)=>(e.openBlock(),e.createElementBlock("section",{class:"row-wrap",ref_key:"refRows",ref:n},[e.renderSlot(t.$slots,"default",{},void 0,!0)],512))}},[["__scopeId","data-v-77177a0b"]]),P="";const H=["draggable"];var $=B({__name:"col",props:{rowSpan:{type:Number,default:1},columnSpan:{type:Number,default:1},drag:Boolean,resize:Boolean},setup(o){const r=o;e.useCssVars(c=>({"592ccc26":e.unref(d),"0e72f30a":e.unref(R),"20a58414":e.unref(j)}));const n=e.ref(null),m=e.inject("register",()=>{}),g=e.inject("getOrder",()=>{}),I=e.inject("setOrder",()=>{}),S=e.inject("setDragNode",()=>{}),_=e.inject("setDropNode",()=>{}),l=e.ref(!1),s=e.reactive({el:null,gridColumn:r.columnSpan,gridRow:r.rowSpan,drag:r.drag,resize:r.resize}),j=e.computed(()=>g(s)),d=e.computed(()=>`span ${s.gridColumn}`),R=e.computed(()=>`span ${s.gridRow}`);return e.onMounted(()=>{const c=Array.from(n.value.parentNode.children).indexOf(n.value);s.el=n.value,m(s,c),n.value.addEventListener("dragstart",()=>{if(!r.drag)return!1;S(s),l.value=!0}),n.value.addEventListener("dragend",()=>{if(!r.drag)return!1;l.value=!1}),n.value.addEventListener("dragover",()=>{if(!r.drag)return!1;I()}),n.value.addEventListener("dragenter",()=>{if(!r.drag)return!1;_(s)})}),(c,L)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["col-item",{"on-drag":l.value,"can-edit":o.resize,"can-drag":o.drag}]),draggable:o.drag,ref_key:"colItem",ref:n},[e.renderSlot(c.$slots,"default",{},void 0,!0)],10,H))}},[["__scopeId","data-v-68feafe0"]]);function F(o){o.component("jdRow",M),o.component("jdCol",$)}return F});
