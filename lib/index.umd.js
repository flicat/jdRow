var __vite_style__=document.createElement("style");__vite_style__.innerHTML=`.row-wrap[data-v-32b89d2e]{display:grid;width:100%;grid-template-columns:var(--74f9aabb);grid-template-rows:var(--5754e88a);grid-auto-columns:calc(var(--b370d796) * 1px);grid-auto-rows:calc(var(--08dbf898) * 1px);column-gap:calc(var(--60318897) * 1px);row-gap:calc(var(--363fc505) * 1px);overflow:hidden;position:relative}.col-item[data-v-32c1ea72]{box-sizing:border-box;border:1px solid #999;background-color:#fff;overflow:hidden;font-size:28px;font-weight:900;color:#666;text-align:center;grid-column:var(--758dae5a);grid-row:var(--3cfac506);order:var(--9ca7b2fe);resize:none!important;position:relative}.col-item.on-drag[data-v-32c1ea72]{opacity:.2}.col-item.can-edit[data-v-32c1ea72]{resize:both!important}.col-item.can-drag[data-v-32c1ea72]{cursor:move}
(function(e,C){typeof exports=="object"&&typeof module!="undefined"?module.exports=C(require("vue")):typeof define=="function"&&define.amd?define(["vue"],C):(e=typeof globalThis!="undefined"?globalThis:e||self,e.JdRow=C(e.Vue))})(this,function(e){"use strict";`;document.head.appendChild(__vite_style__);var C="",E=(n,r)=>{const o=n.__vccOpts||n;for(const[s,g]of r)o[s]=g;return o},M=E({__name:"row",props:{rowWidth:Number,rowHeight:Number,rowSize:{type:Number,default:24},rowGap:{type:Number,default:0},columnGap:{type:Number,default:0},columns:Array,rows:Array},setup(n){const r=n;e.useCssVars(t=>({"74f9aabb":e.unref(h),"5754e88a":e.unref(b),b370d796:n.rowWidth,"08dbf898":n.rowHeight,60318897:n.columnGap,"363fc505":n.rowGap}));const o=e.ref(null),s=e.reactive([]),g=e.reactive([]),L=e.ref(0),B=e.ref(0),z=e.ref(0),O=e.ref(0);let I,w,d;const h=e.computed(()=>{let t=Array.from({length:r.rowSize});return typeof r.rowWidth=="number"?t.fill(r.rowWidth+"px"):t.fill("1fr"),Array.isArray(r.columns)&&Object.assign(t,r.columns),t.join(" ")}),b=e.computed(()=>Array.isArray(r.rows)?r.rows.join(" "):""),i=e.reactive([]),p=()=>{const{width:t,height:a,left:f,top:u}=o.value.getBoundingClientRect(),{"padding-left":v,"padding-right":A,"border-left-width":_,"border-right-width":N,"padding-top":y,"padding-bottom":R,"border-top-width":x,"border-bottom-width":S,"grid-template-columns":j,"grid-template-rows":T}=window.getComputedStyle(o.value);L.value=t-parseInt(v)-parseInt(A)-parseInt(_)-parseInt(N),B.value=a-parseInt(y)-parseInt(R)-parseInt(x)-parseInt(S),z.value=f+parseInt(v)+parseInt(_),O.value=u+parseInt(y)+parseInt(x),Object.assign(s,j.split(" ").map(c=>parseFloat(c))),Object.assign(g,T.split(" ").map(c=>parseFloat(c)))},l=new ResizeObserver(()=>{window.requestAnimationFrame(p)}),W=(t,a,f)=>{const u=i.find(v=>v.el===t);u&&(u.gridColumn=a,u.gridRow=f)},G=new ResizeObserver(t=>{window.requestAnimationFrame(()=>{t.forEach(({target:a})=>{if(d&&d.el!==a)return!1;let{left:f,top:u,right:v,bottom:A}=a.getBoundingClientRect(),_=f-z.value,N=u-O.value,y=v-z.value,R=A-O.value,x=0,S=0,j=0,T=0;s.reduce((c,m)=>(_-=c,y-=c,x+=Math.round(_/m)<=0,S+=Math.ceil(y/m)<=0,_-=r.columnGap,y-=r.columnGap,m),0),g.reduce((c,m)=>(N-=c,R-=c,j+=Math.round(N/m)<=0,T+=Math.ceil(R/m)<=0,N-=r.rowGap,R-=r.rowGap,m),0),W(a,x-S,j-T)})})});let k;const D=new MutationObserver(t=>{clearTimeout(k),k=setTimeout(()=>{t.forEach(({target:a})=>{a.style.width="",a.style.height=""})},300)}),q=(t,a)=>{i[a]=t,t.resize&&(G.observe(t.el,{box:"border-box"}),D.observe(t.el,{attributeFilter:["style"]}))},V=t=>i.indexOf(t),J=()=>{const t=i.indexOf(I),a=i.indexOf(w);if(t>-1&&a>-1){const f=i.splice(t,1)[0];i.splice(a,0,f)}},U=t=>{I=t},K=t=>{w=t},P=t=>{d=t};return e.provide("register",q),e.provide("getOrder",V),e.provide("setOrder",J),e.provide("setDragNode",U),e.provide("setDropNode",K),e.provide("setResizeNode",P),e.onMounted(()=>{e.nextTick(()=>{p(),l.observe(o.value)})}),e.onUnmounted(()=>{G.disconnect(),D.disconnect(),l.disconnect()}),(t,a)=>(e.openBlock(),e.createElementBlock("section",{class:"row-wrap",ref_key:"refRows",ref:o},[e.renderSlot(t.$slots,"default",{},void 0,!0)],512))}},[["__scopeId","data-v-32b89d2e"]]),X="";const H=["draggable"];var $=E({__name:"col",props:{rowSpan:{type:Number,default:1},columnSpan:{type:Number,default:1},drag:Boolean,resize:Boolean},emits:["change"],setup(n,{emit:r}){const o=n;e.useCssVars(p=>({"758dae5a":e.unref(b),"3cfac506":e.unref(i),"9ca7b2fe":e.unref(h)}));const s=e.ref(null),g=e.inject("register",()=>{}),L=e.inject("getOrder",()=>{}),B=e.inject("setOrder",()=>{}),z=e.inject("setDragNode",()=>{}),O=e.inject("setDropNode",()=>{}),I=e.inject("setResizeNode",()=>{}),w=e.ref(!1),d=e.reactive({el:null,gridColumn:o.columnSpan,gridRow:o.rowSpan,drag:o.drag,resize:o.resize}),h=e.computed(()=>L(d)),b=e.computed(()=>`span ${d.gridColumn}`),i=e.computed(()=>`span ${d.gridRow}`);return e.onMounted(()=>{const p=Array.from(s.value.parentNode.children).indexOf(s.value);d.el=s.value,g(d,p),s.value.addEventListener("dragstart",()=>{if(!o.drag)return!1;z(d),w.value=!0}),s.value.addEventListener("dragend",()=>{if(!o.drag)return!1;w.value=!1}),s.value.addEventListener("dragover",()=>{if(!o.drag)return!1;B()}),s.value.addEventListener("dragenter",()=>{if(!o.drag)return!1;O(d)}),s.value.addEventListener("mousedown",()=>{if(!o.resize)return!1;I(d)}),e.watch(h,l=>{r("change",{order:l,column:b.value,row:i.value})}),e.watch(b,l=>{r("change",{order:h.value,column:l,row:i.value})}),e.watch(i,l=>{r("change",{order:h.value,column:b.value,row:l})})}),(p,l)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["col-item",{"on-drag":w.value,"can-edit":n.resize,"can-drag":n.drag}]),draggable:n.drag,ref_key:"colItem",ref:s},[e.renderSlot(p.$slots,"default",{},void 0,!0)],10,H))}},[["__scopeId","data-v-32c1ea72"]]);function F(n){n.component("jdRow",M),n.component("jdCol",$)}return F});
